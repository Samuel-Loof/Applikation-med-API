@page
@model IndexModel
@inject Applikation_med_API.Data.AccessControl accessControl
@{
    ViewData["Title"] = "Home page";
}

<h1>Welcome, @accessControl.LoggedInAccountName!</h1>

<a href="/ShoppingCart">Visa varukorg</a>

<h2>Sortiment</h2>
@if (Model.Products != null && Model.Products.Count > 0)
{
    <ul>
        @foreach (var product in Model.Products)
        {
            <li>
                <img src="images/@product.ImagePath" alt="En bild av @product.Name" style="width: 200px;" />
                <h3>@product.Name</h3>
                <p>@product.Description</p>
                <p>Pris: @(product.Price.ToString("0.##")) kr</p>
                <p>Kategori: @product.Category</p>
                <!-- Add to cart button -->
                <form method="post">
                    <input type="hidden" name="productId" value="@product.ID" />
                    <button type="submit">Lägg i varukorg</button>
                </form>
            </li>
        }
    </ul>
}
else
{
    <p>Hittade inga produkter.</p>
}

<!-- pagination-->
<nav aria-label="Page navigation">
    <ul class="pagination">
        <!-- Previous Page Link -->
        @if (Model.CurrentPage > 1)
        {
            <li class="page-item">
                <!-- asp-page tags specify the target Razor page, and asp-route-currentPage sets the query string parameter for pagination -->
                <a class="btn btn-primary" asp-page="/Index" asp-route-currentPage="@(Model.CurrentPage - 1)">Previous</a>
            </li>
        }

        <!-- The loop iterates from 1 to TotalPages, creating a list item for each page number.
        Each link within the list items is set to navigate to the Index page with the currentPage parameter set to the iterator value,
        enabling direct access to specific pages. -->
        @for (int i = 1; i <= Model.TotalPages; i++)
        {
            <li class="page-item @(Model.CurrentPage == i ? "active" : "")">
                <!-- Renders a button-like link for each page number; clicking navigates to the respective page -->
                <a class="btn btn-primary" asp-page="/Index" asp-route-currentPage="@i">@i</a>
            </li>
        }

        <!-- Next Page Link -->
        @if (Model.CurrentPage < Model.TotalPages)
        {
            <!-- Next page link with Bootstrap button styling -->
            <li class="page-item">
                <a class="btn btn-primary" asp-page="/Index" asp-route-currentPage="@(Model.CurrentPage + 1)">Next</a>
            </li>
        }
    </ul>
</nav>

