@page
@model IndexModel
@inject Applikation_med_API.Data.AccessControl accessControl
@{
    ViewData["Title"] = "Home page";
}

<h1>Welcome, @accessControl.LoggedInAccountName!</h1>


<ul>
    @foreach (var product in Model.Products)
    {
        <li>
            <a asp-page="/ProductDetails" asp-route-id="@product.ID">
                <img src="@product.ImagePath" alt="Image of @product.Name" />
                <h3>@product.Name</h3>
                <p>@product.Price kr</p>
                <!-- Add to cart button -->
                <form method="post">
                    <input type="hidden" name="productId" value="@product.ID" />
                    <button type="submit">Lägg i varukorg</button>
                </form>
            </a>
        </li>
    }
</ul>


<!-- pagination-->
<nav aria-label="Page navigation">
    <ul class="pagination">
        <!-- Previous Page Link -->
        @if (Model.CurrentPage > 1)
        {
            <li class="page-item">
                <!-- asp-page tags specify the target Razor page, and asp-route-currentPage sets the query string parameter for pagination -->
                <a class="btn btn-primary" asp-page="/Index" asp-route-currentPage="@(Model.CurrentPage - 1)">Previous</a>
            </li>
        }

        <!-- The loop iterates from 1 to TotalPages, creating a list item for each page number.
        Each link within the list items is set to navigate to the Index page with the currentPage parameter set to the iterator value,
        enabling direct access to specific pages. -->
        @for (int i = 1; i <= Model.TotalPages; i++)
        {
            <li class="page-item @(Model.CurrentPage == i ? "active" : "")">
                <!-- Renders a button-like link for each page number; clicking navigates to the respective page -->
                <a class="btn btn-primary" asp-page="/Index" asp-route-currentPage="@i">@i</a>
            </li>
        }

        <!-- Next Page Link -->
        @if (Model.CurrentPage < Model.TotalPages)
        {
            <!-- Next page link-->
            <li class="page-item">
                <a class="btn btn-primary" asp-page="/Index" asp-route-currentPage="@(Model.CurrentPage + 1)">Next</a>
            </li>
        }
    </ul>
</nav>

